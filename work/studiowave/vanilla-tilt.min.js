var VanillaTilt=function(){"use strict";class a{constructor(a,b={}){if(!(a instanceof Node))throw"Can't initialize VanillaTilt because "+a+" is not a Node.";this.width=null,this.height=null,this.left=null,this.top=null,this.transitionTimeout=null,this.updateCall=null,this.updateBind=this.update.bind(this),this.resetBind=this.reset.bind(this),this.element=a,this.settings=this.extendSettings(b),this.reverse=this.settings.reverse?-1:1,this.addEventListeners()}isSettingTrue(a){return""===a||!0===a||1===a}addEventListeners(){this.onMouseEnterBind=this.onMouseEnter.bind(this),this.onMouseMoveBind=this.onMouseMove.bind(this),this.onMouseLeaveBind=this.onMouseLeave.bind(this),this.element.addEventListener("mouseenter",this.onMouseEnterBind),this.element.addEventListener("mousemove",this.onMouseMoveBind),this.element.addEventListener("mouseleave",this.onMouseLeaveBind)}removeEventListeners(){this.element.removeEventListener("mouseenter",this.onMouseEnterBind),this.element.removeEventListener("mousemove",this.onMouseMoveBind),this.element.removeEventListener("mouseleave",this.onMouseLeaveBind)}destroy(){clearTimeout(this.transitionTimeout),null!==this.updateCall&&cancelAnimationFrame(this.updateCall),this.reset(),this.removeEventListeners(),this.element.vanillaTilt=null,delete this.element.vanillaTilt,this.element=null}onMouseEnter(){this.updateElementPosition(),this.element.style.willChange="transform",this.setTransition()}onMouseMove(a){null!==this.updateCall&&cancelAnimationFrame(this.updateCall),this.event=a,this.updateCall=requestAnimationFrame(this.updateBind)}onMouseLeave(){this.setTransition(),this.settings.reset&&requestAnimationFrame(this.resetBind)}reset(){this.event={pageX:this.left+this.width/2,pageY:this.top+this.height/2},this.element.style.transform="perspective("+this.settings.perspective+"px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)"}getValues(){let a=(this.event.clientX-this.left)/this.width,b=(this.event.clientY-this.top)/this.height;a=Math.min(Math.max(a,0),1),b=Math.min(Math.max(b,0),1);let c=(this.reverse*(this.settings.max/2-a*this.settings.max)).toFixed(2),d=(this.reverse*(b*this.settings.max-this.settings.max/2)).toFixed(2),e=Math.atan2(this.event.clientX-(this.left+this.width/2),-(this.event.clientY-(this.top+this.height/2)))*(180/Math.PI);return{tiltX:c,tiltY:d,percentageX:100*a,percentageY:100*b,angle:e}}updateElementPosition(){let a=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=a.left,this.top=a.top}update(){let a=this.getValues();this.element.style.transform="perspective("+this.settings.perspective+"px) rotateX("+("x"===this.settings.axis?0:a.tiltY)+"deg) rotateY("+("y"===this.settings.axis?0:a.tiltX)+"deg) scale3d("+this.settings.scale+", "+this.settings.scale+", "+this.settings.scale+")",this.element.dispatchEvent(new CustomEvent("tiltChange",{detail:a})),this.updateCall=null}setTransition(){clearTimeout(this.transitionTimeout),this.element.style.transition=this.settings.speed+"ms "+this.settings.easing,this.transitionTimeout=setTimeout(()=>{this.element.style.transition=""},this.settings.speed)}extendSettings(a){let b={reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1",speed:"300",transition:!0,axis:null,reset:!0},c={};for(var d in b)if(d in a)c[d]=a[d];else if(this.element.hasAttribute("data-tilt-"+d)){let a=this.element.getAttribute("data-tilt-"+d);try{c[d]=JSON.parse(a)}catch(b){c[d]=a}}else c[d]=b[d];return c}static init(b,c){b instanceof Node&&(b=[b]),b instanceof NodeList&&(b=[].slice.call(b)),b instanceof Array&&b.forEach(b=>{"vanillaTilt"in b||(b.vanillaTilt=new a(b,c))})}}return"undefined"!=typeof document&&(window.VanillaTilt=a,a.init(document.querySelectorAll("[data-tilt]"))),a}();
